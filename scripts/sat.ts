// のじまさんからもらったやつはる
const input = `
(((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((!v3 || v36) || v7) && ((!v3 || !v42) || !v48)) && ((!v49 || !v47) || !v41)) && ((v8 || !v40) || v17)) && ((!v21 || !v31) || !v39)) && ((v36 || !v22) || v49)) && ((v27 || v38) || v14)) && ((v15 || !v18) || v6)) && ((v6 || v7) || !v43)) && ((v34 || !v7) || v23)) && ((v2 || v14) || !v13)) && ((v2 || v47) || !v42)) && ((!v33 || !v35) || v3)) && ((v44 || v40) || v49)) && ((v50 || v36) || v31)) && ((!v36 || !v3) || !v37)) && ((v26 || !v29) || v43)) && ((v15 || v29) || !v45)) && ((v24 || !v11) || v18)) && ((!v47 || !v26) || v6)) && ((!v50 || !v33) || !v10)) && ((v32 || v6) || v16)) && ((!v34 || v37) || v41)) && ((v7 || !v28) || !v17)) && ((!v44 || v46) || v19)) && ((v7 || v22) || !v48)) && ((v3 || v39) || v34)) && ((v31 || v46) || !v43)) && ((!v27 || v32) || v23)) && ((v37 || !v50) || !v18)) && ((v20 || v5) || v11)) && ((!v45 || !v24) || v6)) && ((!v34 || !v23) || !v14)) && ((!v22 || v21) || v20)) && ((!v17 || v50) || v24)) && ((!v25 || !v24) || !v27)) && ((v3 || v35) || v21)) && ((!v26 || v47) || !v36)) && ((!v28 || !v45) || v49)) && ((!v21 || !v6) || v12)) && ((!v17 || !v15) || !v39)) && ((v41 || v2) || !v14)) && ((v25 || v36) || !v23)) && ((!v39 || !v3) || !v40)) && ((v50 || v20) || v35)) && ((v27 || v31) || !v39)) && ((v45 || !v15) || !v40)) && ((v34 || v50) || v35)) && ((!v1 || !v48) || v12)) && ((v18 || !v35) || !v30)) && ((v27 || !v24) || !v25)) && ((!v4 || !v33) || !v12)) && ((!v43 || !v24) || !v37)) && ((!v37 || v31) || !v44)) && ((!v9 || !v38) || v14)) && ((v33 || !v16) || v34)) && ((v4 || !v35) || !v5)) && ((!v3 || !v21) || !v19)) && ((!v35 || !v36) || !v29)) && ((v7 || !v43) || v36)) && ((v30 || v14) || v41)) && ((!v35 || !v24) || !v7)) && ((v35 || !v42) || v6)) && ((!v1 || !v15) || v39)) && ((v27 || v49) || !v16)) && ((!v37 || v49) || !v10)) && ((v50 || !v46) || !v3)) && ((!v41 || v20) || v34)) && ((!v1 || v23) || v28)) && ((!v12 || !v30) || !v20)) && ((!v24 || v29) || !v37)) && ((v12 || v5) || !v44)) && ((!v6 || !v2) || v48)) && ((!v2 || !v49) || !v43)) && ((v1 || !v50) || v24)) && ((!v7 || !v50) || !v44)) && ((!v41 || v43) || v4)) && ((v13 || v15) || !v11)) && ((!v3 || !v11) || v23)) && ((v33 || v48) || v41)) && ((v9 || v23) || !v49)) && ((!v43 || v47) || v1)) && ((!v40 || v16) || !v29)) && ((v30 || v19) || v3)) && ((v19 || !v34) || v48)) && ((!v16 || !v44) || v14)) && ((v38 || !v45) || !v12)) && ((!v4 || !v14) || !v31)) && ((!v48 || v35) || !v1)) && ((v45 || !v13) || v19)) && ((v9 || v42) || !v7)) && ((!v1 || !v15) || v8)) && ((!v13 || !v44) || !v14)) && ((!v43 || !v37) || !v31)) && ((!v27 || !v29) || v47)) && ((v7 || v4) || v17)) && ((v7 || v10) || v35)) && ((!v25 || v20) || v17)) && ((v35 || !v5) || !v42)) && ((!v50 || v24) || !v5)) && ((!v21 || !v26) || v2)) && ((!v8 || v45) || !v21)) && ((!v16 || v33) || v49)) && ((!v38 || v6) || v16)) && ((v5 || v21) || v37)) && ((v8 || v38) || v31)) && ((!v21 || v33) || v14)) && ((v20 || v40) || !v5)) && ((!v29 || !v9) || v31)) && ((!v7 || v42) || !v22)) && ((!v48 || v8) || v26)) && ((v48 || !v38) || v33)) && ((!v34 || v49) || v46)) && ((!v14 || !v46) || v25)) && ((!v46 || v4) || v18)) && ((v36 || !v12) || !v31)) && ((v12 || !v18) || v14)) && ((!v7 || v46) || !v16)) && ((v9 || !v8) || v7)) && ((v49 || !v42) || !v22)) && ((v22 || !v15) || v38)) && ((v34 || !v41) || v47)) && ((v22 || !v26) || v32)) && ((!v25 || !v45) || !v21)) && ((!v26 || v32) || !v11)) && ((v15 || v26) || !v25)) && ((!v1 || v46) || v25)) && ((!v14 || !v31) || v30)) && ((!v9 || !v22) || v12)) && ((!v18 || v26) || !v35)) && ((!v16 || !v32) || !v21)) && ((v31 || !v49) || !v21)) && ((v11 || v9) || v41)) && ((!v13 || !v30) || v19)) && ((!v10 || v4) || v6)) && ((!v4 || v3) || !v22)) && ((!v25 || !v50) || !v18)) && ((!v40 || v4) || v9)) && ((v37 || v20) || v46)) && ((!v27 || v22) || !v29)) && ((v34 || v14) || v3)) && ((v3 || !v31) || v20)) && ((!v50 || v2) || !v26)) && ((v17 || !v29) || v38)) && ((!v49 || v12) || !v41)) && ((v15 || !v35) || !v43)) && ((!v22 || !v23) || !v49)) && ((!v9 || v33) || v48)) && ((v26 || v29) || v35)) && ((v27 || !v50) || v37)) && ((!v7 || v46) || !v43)) && ((!v46 || !v37) || !v8)) && ((!v40 || v36) || !v24)) && ((!v44 || v46) || v15)) && ((!v3 || v36) || !v16)) && ((!v48 || v9) || v43)) && ((!v25 || !v4) || v44)) && ((!v22 || v37) || !v7)) && ((!v31 || !v17) || !v22)) && ((!v11 || !v48) || v17)) && ((v23 || v34) || !v28)) && ((v23 || !v48) || !v39)) && ((!v37 || !v1) || !v23)) && ((!v19 || v27) || v14)) && ((!v22 || v33) || !v6)) && ((!v6 || !v32) || !v26)) && ((v18 || !v20) || !v46)) && ((v43 || v22) || v27)) && ((!v13 || v34) || v49)) && ((!v35 || !v46) || v3)) && ((v32 || v39) || !v43)) && ((v6 || !v39) || !v9)) && ((v27 || v39) || !v16)) && ((v25 || !v17) || !v15)) && ((!v43 || v27) || v34)) && ((!v6 || v49) || v5)) && ((!v38 || v11) || v14)) && ((v40 || !v38) || v47)) && ((v37 || !v14) || v17)) && ((v39 || v29) || v36)) && ((!v39 || !v28) || v1)) && ((!v18 || v14) || !v16)) && ((!v40 || v50) || v15)) && ((v37 || !v42) || v18)) && ((!v13 || v31) || v33)) && ((v2 || !v42) || v33)) && ((v8 || !v3) || !v22)) && ((v1 || v23) || !v31)) && ((!v20 || !v45) || v26)) && ((v42 || v11) || v49)) && ((v29 || v11) || !v43)) && ((!v20 || !v21) || v30)) && ((v23 || v45) || !v35)) && ((v38 || !v30) || !v14)) && ((!v9 || v48) || !v29)) && ((v11 || !v18) || !v23)) && ((!v41 || !v1) || !v29)) && ((v5 || v41) || v26)) && ((v44 || !v30) || !v7)) && ((v38 || !v6) || !v41)) && ((v46 || v48) || !v15)) && ((!v18 || !v10) || !v47)) && ((v38 || v46) || !v32)) && ((!v32 || v46) || v12)) && ((v31 || v40) || v14)) && ((!v18 || v2) || v49)) && ((v28 || !v38) || v27)) && ((!v16 || !v21) || v14)) && ((!v29 || v15) || v12)) && ((v49 || v34) || v5)) && ((v14 || v22) || !v12)) && ((v30 || v33) || v20)) && ((!v24 || v22) || v25)) && ((v4 || !v48) || !v23)) && ((!v30 || !v36) || v9)) && ((v44 || v12) || !v35)) && ((v38 || v3) || !v21)) && ((!v11 || v33) || v49))
`;

const clauses = input.replace(/[\(\)]/g, "").split("&&");
const lines: string[] = [];
const ids = new Set<number>();
for (const c of clauses) {
  const line: string[] = [];
  for (const ci of c.split("||")) {
    const lit = ci.trim();
    const isNeg = lit.startsWith("!");
    const id = Number(lit.replace(/^\!?v/, ""));
    console.log({ id, isNeg });
    line.push(isNeg ? `-${id}` : `${id}`);
    ids.add(id);
  }
  line.push("0");
  lines.push(line.join(" "));
}

console.log(`p cnf ${ids.size} ${lines.length}`);
console.log(lines.join("\n"));
// コピペして minisat とかになげる
